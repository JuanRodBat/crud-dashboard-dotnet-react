/* ===== Light theme (default) ===== */
:root{
  --bg:#a3a3af;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#6b7280;
  --border:#e5e7eb;
  --primary:#2563eb;
  --primary-hover:#1d4ed8;
  --danger:#dc2626;
  --radius:14px;
  --shadow:0 6px 20px rgba(15,23,42,.06);

  /* Pie chart palette */
  --pie-1:#2563eb; --pie-2:#10b981; --pie-3:#f59e0b;
  --pie-4:#ef4444; --pie-5:#8b5cf6; --pie-6:#0ea5e9;
}

/* ===== Dark theme ===== */
.dark{
  --bg:#0f172a;
  --card:#1e293b;
  --text:#f1f5f9;
  --muted:#94a3b8;
  --border:#334155;
  --primary:#3b82f6;
  --primary-hover:#60a5fa;
  --danger:#f87171;
  --shadow:0 6px 20px rgba(0,0,0,.45);

  /* Pie chart palette (más suaves para dark) */
  --pie-1:#60a5fa; --pie-2:#34d399; --pie-3:#fbbf24;
  --pie-4:#f87171; --pie-5:#a78bfa; --pie-6:#38bdf8;
}

*{box-sizing:border-box}
html,body,#root{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color:var(--text);
  background:var(--bg);
}

/* ===== Layout ===== */
.container{
  max-width:1200px;
  margin:0 auto;
  padding:20px;
}
.nav{
  position:sticky;
  top:0; z-index:10;
  backdrop-filter:saturate(140%) blur(6px);
  background:rgba(255,255,255,.7);
  border-bottom:1px solid var(--border);
}
.nav-inner{
  display:flex;
  align-items:center;
  gap:16px;
  padding:12px 20px;
}
.brand{
  font-weight:700;
  letter-spacing:.2px;
}
.nav-buttons{
  display:"flex";
  gap:8;
}
.nav a{
  color:var(--text);
  text-decoration:none;
  padding:8px 10px;
  border-radius:10px;
}
.nav a.active{
  color:var(--primary);
  background:rgba(59,130,246,.12);
}
/* ===== Navbar a en dark ===== */
.dark .nav a.active{
  background:rgba(59,130,246,.18)
}
/* ===== Navbar en dark ===== */
.dark .nav{
  background:rgba(30,41,59,.75);
  border-bottom:1px solid var(--border);
}

/* ===== Cards / grid ===== */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:16px;
}
.grid{
  display:grid;
  gap:20px;
}
@media(min-width:900px){
  .grid-2{ grid-template-columns:1.4fr 1fr; } 
}
.form-grid{ display:grid; gap:12px;
  grid-template-columns:1fr 1fr;
}
@media (max-width: 600px){
  .form-grid{ grid-template-columns:1fr; }
}

/* ===== Cards en dark ===== */
.dark .card{
  background:var(--card);
  border-color:var(--border);
}

/* ===== Buttons & inputs ===== */
.btn{
  border:1px solid var(--border);
  background:var(--card);
  color:var(--text);
  padding:10px 14px;
  border-radius:12px;
  cursor:pointer;
  transition:.15s;
}
.btn:hover{
  box-shadow:var(--shadow);
}
.btn.primary{
  background:var(--primary);
  color:#fff; border-color:transparent;
}
.btn.primary:hover{
  background:var(--primary-hover)
}
.btn.danger{
  background:rgba(248,113,113,.12);
  color:#fca5a5;
  border-color:#fca5a5;
}
.dark .btn.danger{
  background:rgba(248,113,113,.16);
  color:#fecaca;
  border-color:#f87171;
}
.input,
.select{
  width:100%;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--card);
  color:var(--text);
  outline:none;
}
.input::placeholder{
  color:var(--muted);
}
.label{
  font-size:12px;
  color:var(--muted);
  margin-bottom:6px;
}

/* ===== Table (responsive) ===== */
.table-wrap{
  overflow:auto;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--card)
}
table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
  color:var(--text);
}
th,td{
  padding:10px 12px;
  white-space:nowrap;
  border-bottom:1px solid var(--border);
}
th{
  text-align:left;
  color:var(--muted);
  font-weight:600;
  background:#fafafa;
}
.dark th{
  background:#0b1220;
  color:var(--muted);
  border-bottom:1px solid var(--border);
}
.dark td{
  color:var(--text);
}
tbody tr:hover{
  background:rgba(2,6,23,.03);
}
.dark tbody tr:hover{
  background:rgba(148,163,184,.06);
}

.table-stack table{ width:100%; }
@media (max-width: 720px){
  .table-stack table,
  .table-stack thead,
  .table-stack tbody,
  .table-stack th,
  .table-stack td,
  .table-stack tr { display:block; }

  .table-stack thead { 
    /* ===== oculta encabezados de tabla en móvil ===== */
    position:absolute; left:-9999px; top:-9999px;
  }
  .table-stack tr{
    border:1px solid var(--border);
    border-radius:12px;
    margin:0 0 12px 0;
    background:var(--card);
    box-shadow: var(--shadow);
    padding:8px 0;
  }
  .table-stack td{
    border:none;
    border-bottom:1px solid var(--border);
    position:relative;
    padding:12px 12px 12px 130px;
    white-space:normal;
  }
  .table-stack td:last-child{ border-bottom:none; }

  .table-stack td::before{
    content: attr(data-label);
    position:absolute; left:12px; top:12px; width:110px;
    color:var(--muted); font-weight:600;
  }

  .table-stack td .btn{ padding:8px 10px; }
  .table-stack td .btn + .btn{ margin-left:8px; }
}

/* ===== Fondo del lienzo del mapa en dark ===== */
.dark .leaflet-container {
  background:#0b1220;
}

/* ===== Popups dark ===== */
.dark .leaflet-popup-content-wrapper,
.dark .leaflet-popup-tip{
  background:#0f172a;
  color:var(--text);
  border:1px solid var(--border);
}

/* ===== Controles y atribuciones en oscuro ===== */
.dark .leaflet-control-attribution,
.dark .leaflet-control-scale{
  color:var(--muted);
  background:rgba(30,41,59,.6);
  border:1px solid var(--border);
}
.dark .leaflet-control-attribution a{
  color:var(--primary);
}

/* ===== Helpers ===== */
.muted{
  color:var(--muted);
}
.space-y > * + *{
  margin-top: var(--space);
}
.center{
  display:flex;
  align-items:center;
  justify-content:center;
}
